<!DOCTYPE html>
<html>
<head>
  <title>Admin Dashboard</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>
<body class="bg-light">

<div class="container mt-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2> Admin Dashboard</h2>
    <a href="/logout" class="btn btn-danger">Logout</a>
  </div>

  <!-- MOVIES SECTION -->
  <div class="card mb-4">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h4>Movies</h4>
      <a href="/admin/add-movie" class="btn btn-primary btn-sm">➕ Add Movie</a>
    </div>
    <div class="card-body">
      <% if (movies && movies.length > 0) { %>
      <table class="table table-bordered">
        <thead>
          <tr>
            <th>Title</th>
            <th>Language</th>
            <th>Duration</th>
            <th>Release Date</th>
          </tr>
        </thead>
        <tbody>
          <% movies.forEach(movie => { %>
            <tr>
              <td><%= movie.title %></td>
              <td><%= movie.language %></td>
              <td><%= movie.duration %></td>
              <td><%= movie.releaseDate ? new Date(movie.releaseDate).toDateString() : 'N/A' %></td>
            </tr>
          <% }) %>
        </tbody>
      </table>
      <% } else { %>
        <p class="text-muted">No movies added yet.</p>
      <% } %>
    </div>
  </div>

  <!-- SCREENS SECTION -->
  <div class="card mb-4">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h4>Screens</h4>
      <a href="/admin/add-screen" class="btn btn-success btn-sm">➕ Add Screen</a>
    </div>
    <div class="card-body">
      <% if (screens && screens.length > 0) { %>
      <table class="table table-bordered">
        <thead>
          <tr>
            <th>Name</th>
            <th>Total Seats</th>
          </tr>
        </thead>
        <tbody>
          <% screens.forEach(screen => { %>
            <tr>
              <td><%= screen.name %></td>
              <td><%= screen.totalSeats %></td>
            </tr>
          <% }) %>
        </tbody>
      </table>
      <% } else { %>
        <p class="text-muted">No screens added yet.</p>
      <% } %>
    </div>
  </div>

  <!-- SHOWS SECTION -->
  <div class="card mb-4">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h4>Shows</h4>
      <a href="/admin/add-show" class="btn btn-warning btn-sm">➕ Add Show</a>
    </div>
    <div class="card-body">
      <% if (shows && shows.length > 0) { %>
      <table class="table table-bordered">
        <thead>
          <tr>
            <th>Movie</th>
            <th>Screen</th>
            <th>Time</th>
            <th>Price</th>
          </tr>
        </thead>
        <tbody>
          <% shows.forEach(show => { %>
            <tr>
              <td><%= show.movie ? show.movie.title : 'Deleted Movie' %></td>
              <td><%= show.screen ? show.screen.name : 'Deleted Screen' %></td>
              <td><%= show.time %></td>
              <td>₹<%= show.price %></td>
            </tr>
          <% }) %>
        </tbody>
      </table>
      <% } else { %>
        <p class="text-muted">No shows scheduled.</p>
      <% } %>
    </div>
  </div>

</div>

</body>
</html>